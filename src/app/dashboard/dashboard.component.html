<div class="dashboard-container">
  <div class="heading">
    <h2>User Dashboard</h2>
  </div>
  <div class="dashboard-content">
    <form [formGroup]="userForm" (ngSubmit)="onSubmit()" class="user-form">
      <div class="input">
        <label for="id">ID:</label>
        <input id="id" formControlName="id" />
        <div class="error-message" *ngIf="userForm.get('id')?.touched && userForm.get('id')?.invalid">
          <span *ngIf="userForm.get('id')?.hasError('required')">ID is required</span>
          <span *ngIf="idValid2" style="color: red;"></span>
        </div>
      </div>
      

      <div class="input">
        <label for="name">Name:</label>
        <input id="name" formControlName="name" />
        <div class="error-message" *ngIf="userForm.get('name')?.touched && userForm.get('name')?.invalid">
          <span *ngIf="userForm.get('name')?.hasError('required')">Name is required</span>
        </div>
      </div>

      <div class="input">
        <label for="email">Email:</label>
        <input id="email" formControlName="email" />
        
        <div class="error-message" *ngIf="userForm.get('email')?.touched && userForm.get('email')?.invalid">
          <span *ngIf="userForm.get('email')?.hasError('required')">Email is required</span>
          <span *ngIf="userForm.get('email')?.hasError('email')">Invalid email format</span>
        </div>
      </div>

      <div formGroupName="address" class="input">
        <label for="street">Street:</label>
        <input id="street" formControlName="street" />
        <div class="error-message" *ngIf="userForm.get('address.street')?.touched && userForm.get('address.street')?.invalid">
          <span *ngIf="userForm.get('address.street')?.hasError('required')">Street is required</span>
        </div>

        <label for="suite">Suite:</label>
        <input id="suite" formControlName="suite" />
        <div class="error-message" *ngIf="userForm.get('address.suite')?.touched && userForm.get('address.suite')?.invalid">
          <span *ngIf="userForm.get('address.suite')?.hasError('required')">Suite is required</span>
        </div>

        <label for="city">City:</label>
        <input id="city" formControlName="city" />
        <div class="error-message" *ngIf="userForm.get('address.city')?.touched && userForm.get('address.city')?.invalid">
          <span *ngIf="userForm.get('address.city')?.hasError('required')">City is required</span>
        </div>

        <label for="zipcode">Zipcode:</label>
        <input id="zipcode" formControlName="zipcode" />
        <div class="error-message" *ngIf="userForm.get('address.zipcode')?.touched && userForm.get('address.zipcode')?.invalid">
          <span *ngIf="userForm.get('address.zipcode')?.hasError('required')">Zipcode is required</span>
        </div>
      </div>

      <button type="submit" [disabled]="userForm.invalid || idValid2">Add User</button>
<div class="error-message" *ngIf="idValid2">
  <span style="color: red;">User ID already exists</span>
</div>

    </form>

    <div class="user-table">
      <table>
        <thead>
          <tr>
            <th>ID</th>
            <th>Name</th>
            <th>Email</th>
            <th>Address</th>
            <th>Delete</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let user of displayedUser">
            <td>{{ user.id }}</td>
            <td>{{ user.name }}</td>
            <td>{{ user.email }}</td>
            <td>{{ user.address.street }}, 
                {{ user.address.city }}, 
                {{ user.address.suite }}, 
                {{ user.address.zipcode }} 
            </td>
            <td>
              <button (click)="deleteUser(user.id)" class="delete-button" aria-label="Delete User">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 30 30">
                  <path d="M 14.984375 2.4863281 A 1.0001 1.0001 0 0 0 14 3.5 L 14 4 L 8.5 4 A 1.0001 1.0001 0 0 0 7.4863281 5 L 6 5 A 1.0001 1.0001 0 1 0 6 7 L 24 7 A 1.0001 1.0001 0 1 0 24 5 L 22.513672 5 A 1.0001 1.0001 0 0 0 21.5 4 L 16 4 L 16 3.5 A 1.0001 1.0001 0 0 0 14.984375 2.4863281 z M 6 9 L 7.7929688 24.234375 C 7.9109687 25.241375 8.7633438 26 9.7773438 26 L 20.222656 26 C 21.236656 26 22.088031 25.241375 22.207031 24.234375 L 24 9 L 6 9 z"></path>
                </svg>
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
